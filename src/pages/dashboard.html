<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect"/>
<link as="style" href="https://fonts.googleapis.com/css2?display=swap&amp;family=Inter%3Awght%40400%3B500%3B600%3B700&amp;family=Roboto%3Awght%40300%3B400%3B500%3B700" onload="this.rel='stylesheet'" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<title>Plan de Acción Institucional - Panel de Control</title>
<link href="data:image/x-icon;base64," rel="icon" type="image/x-icon"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<style type="text/tailwindcss">
      :root {
        --primary-color: #4f46e5;
        --secondary-color: #f0f2f4;
        --text-primary: #111827;
        --text-secondary: #6b7280;
        --background-color: #f9fafb;
      }
      body {
        font-family: 'Roboto', 'Inter', sans-serif;
      }
      .material-symbols-outlined {
        font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
      }
    </style>
<link rel="stylesheet" href="../styles/sidebar.css">
<link rel="stylesheet" href="../styles/layout.css">
<link rel="stylesheet" href="../styles/loader.css">
<link rel="stylesheet" href="../styles/dashboard.css">
</head>
<body class="bg-[var(--background-color)]">
<div class="h-full min-h-screen w-full flex-col">
<div class="flex-1">
  <div class="layout-with-sidebar">
    <div id="shared-sidebar" class="hidden md:block"></div>
    <main class="p-4 sm:p-6 md:p-8">
<div class="mx-auto max-w-7xl space-y-8">
  <header class="flex flex-wrap items-center justify-between gap-4 pb-6 border-b-2 border-indigo-100">
    <div class="space-y-2">
      <h1 class="text-3xl font-bold text-[var(--text-primary)]">Panel de Control</h1>
      <p class="text-sm text-gray-600">Visualiza y gestiona todas tus actividades del Plan de Acción Institucional</p>
    </div>
    <div class="flex flex-wrap items-center gap-3">
      <a href="https://gamma.app/docs/Guia-del-Aplicativo-Modular-Web-bknztyckss3cq4q" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 rounded-lg bg-gradient-to-r from-indigo-600 to-indigo-700 px-5 py-2.5 text-sm font-semibold text-white shadow-md transition-all hover:shadow-lg hover:from-indigo-700 hover:to-indigo-800">
        <span class="material-symbols-outlined text-lg">menu_book</span>
        Guía
      </a>
      <a href="http://siplag.gestiondelriesgo.gov.co/documentos/1/M-1300-PE-02_01.pdf" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 rounded-lg border-2 border-indigo-200 bg-white px-5 py-2.5 text-sm font-semibold text-indigo-700 shadow-sm transition-all hover:border-indigo-300 hover:bg-indigo-50 hover:shadow-md">
        <span class="material-symbols-outlined text-lg">description</span>
        Manual Formulación
      </a>
    </div>
  </header>

  <section class="rounded-xl border border-indigo-100 bg-gradient-to-r from-white to-indigo-50/30 px-6 py-4 shadow-sm">
    <div class="flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between">
      <div class="flex flex-wrap items-end gap-4">
        <label class="flex flex-col text-sm font-semibold text-[var(--text-primary)]">
          Vigencia
          <select id="filter-year" class="mt-1.5 block w-40 rounded-lg border-gray-300 text-sm shadow-sm transition-all focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50">
            <option value="all">Todas</option>
          </select>
        </label>
        <label class="flex flex-col text-sm font-semibold text-[var(--text-primary)]" data-role="admin-only">
          Área
          <select id="filter-area" class="mt-1.5 block w-72 rounded-lg border-gray-300 text-sm shadow-sm transition-all focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50">
            <option value="__all__">Todas las áreas</option>
          </select>
        </label>
        <button id="filter-clear" type="button" class="inline-flex items-center gap-2 self-end rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-[var(--text-secondary)] shadow-sm transition-all hover:border-indigo-400 hover:bg-indigo-50 hover:text-[var(--primary-color)]">
          <span class="material-symbols-outlined text-base">restart_alt</span>
          Limpiar
        </button>
      </div>
    </div>
  </section>

  <section class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4">
  <article class="group flex items-center gap-4 rounded-xl border border-indigo-100 bg-gradient-to-br from-indigo-50 to-indigo-100/50 p-4 shadow-sm transition-all duration-300 hover:shadow-md hover:scale-[1.02]">
      <span class="flex h-12 w-12 items-center justify-center rounded-full bg-indigo-500 text-white shadow-lg transition-transform duration-300 group-hover:scale-110">
        <span class="material-symbols-outlined text-xl">analytics</span>
      </span>
      <div class="space-y-1">
        <p class="text-xs font-semibold uppercase tracking-wide text-indigo-700/70">Actividades totales</p>
        <p id="kpi-total-activities" class="text-2xl font-bold text-indigo-900">--</p>
      </div>
    </article>
  <article class="group flex items-center gap-4 rounded-xl border border-blue-100 bg-gradient-to-br from-blue-50 to-blue-100/50 p-4 shadow-sm transition-all duration-300 hover:shadow-md hover:scale-[1.02]">
      <span class="flex h-12 w-12 items-center justify-center rounded-full bg-blue-500 text-white shadow-lg transition-transform duration-300 group-hover:scale-110">
        <span class="material-symbols-outlined text-xl">sync</span>
      </span>
      <div class="space-y-1">
        <p class="text-xs font-semibold uppercase tracking-wide text-blue-700/70">En ejecución</p>
        <p id="kpi-in-progress" class="text-2xl font-bold text-blue-900">--</p>
      </div>
    </article>
  <article class="group flex items-center gap-4 rounded-xl border border-emerald-100 bg-gradient-to-br from-emerald-50 to-emerald-100/50 p-4 shadow-sm transition-all duration-300 hover:shadow-md hover:scale-[1.02]">
      <span class="flex h-12 w-12 items-center justify-center rounded-full bg-emerald-500 text-white shadow-lg transition-transform duration-300 group-hover:scale-110">
        <span class="material-symbols-outlined text-xl">task_alt</span>
      </span>
      <div class="space-y-1">
        <p class="text-xs font-semibold uppercase tracking-wide text-emerald-700/70">Cerradas</p>
        <p id="kpi-closed" class="text-2xl font-bold text-emerald-900">--</p>
      </div>
    </article>
  <article class="group flex items-center gap-4 rounded-xl border border-amber-100 bg-gradient-to-br from-amber-50 to-amber-100/50 p-4 shadow-sm transition-all duration-300 hover:shadow-md hover:scale-[1.02]">
      <span class="flex h-12 w-12 items-center justify-center rounded-full bg-amber-500 text-white shadow-lg transition-transform duration-300 group-hover:scale-110">
        <span class="material-symbols-outlined text-xl">flag</span>
      </span>
      <div class="space-y-1">
        <p class="text-xs font-semibold uppercase tracking-wide text-amber-700/70">% cumplimiento</p>
        <p id="kpi-compliance" class="text-2xl font-bold text-amber-900">--</p>
      </div>
    </article>
  </section>

  <section class="rounded-xl border border-purple-200 bg-gradient-to-br from-purple-50 via-white to-indigo-50 p-6 shadow-md">
    <div class="flex items-start gap-5">
      <div class="flex h-16 w-16 flex-shrink-0 items-center justify-center rounded-2xl bg-gradient-to-br from-purple-500 to-indigo-600 text-white shadow-lg">
        <span class="material-symbols-outlined text-3xl">savings</span>
      </div>
      <div class="flex-1 space-y-3">
        <div>
          <p class="text-sm font-semibold uppercase tracking-wide text-purple-700/80">Presupuesto ejecutado</p>
          <p id="kpi-budget-comparison" class="mt-1 text-3xl font-bold text-slate-900">-- / --</p>
        </div>
        <div class="flex items-center gap-3">
          <div class="h-2 flex-1 overflow-hidden rounded-full bg-gray-200">
            <div id="kpi-budget-bar" class="h-full rounded-full bg-gradient-to-r from-purple-500 to-indigo-600 transition-all duration-500" style="width: 0%"></div>
          </div>
          <p id="kpi-budget-detail" class="text-sm font-bold text-purple-700">0%</p>
        </div>
      </div>
    </div>
  </section>

  <section class="grid grid-cols-1 gap-6 xl:grid-cols-2" data-role="admin-only">
    <article class="rounded-xl border border-gray-200 bg-white p-6 shadow-md transition-all duration-300 hover:shadow-lg">
      <div class="flex flex-wrap items-center justify-between gap-3 pb-4 border-b border-gray-100">
        <h3 class="text-lg font-semibold text-[var(--text-primary)]">Actividades por estado y área</h3>
        <div class="flex flex-wrap items-center gap-3 text-xs font-medium text-[var(--text-secondary)]">
          <span class="flex items-center gap-1.5"><span class="h-3 w-3 rounded-full bg-emerald-500 shadow-sm"></span>Completadas</span>
          <span class="flex items-center gap-1.5"><span class="h-3 w-3 rounded-full bg-indigo-500 shadow-sm"></span>En ejecución</span>
          <span class="flex items-center gap-1.5"><span class="h-3 w-3 rounded-full bg-amber-400 shadow-sm"></span>Planeadas</span>
          <span class="flex items-center gap-1.5"><span class="h-3 w-3 rounded-full bg-slate-400 shadow-sm"></span>Otras</span>
        </div>
      </div>
      <div class="mt-6">
        <div id="chart-areas-columns" class="flex h-80 items-end gap-6 overflow-x-auto pb-2"></div>
        <p id="chart-areas-empty" class="mt-4 text-center text-sm text-[var(--text-secondary)]">No hay datos suficientes para construir el gráfico.</p>
      </div>
    </article>
    <article class="rounded-xl border border-gray-200 bg-white p-6 shadow-md transition-all duration-300 hover:shadow-lg">
      <div class="flex flex-wrap items-center justify-between gap-3 pb-4 border-b border-gray-100">
        <h3 class="text-lg font-semibold text-[var(--text-primary)]">Comparativo de cumplimiento por área</h3>
        <span class="text-xs font-medium text-[var(--text-secondary)]">Porcentaje de actividades completadas</span>
      </div>
      <div class="mt-6 space-y-3" id="chart-compliance"></div>
      <p id="chart-compliance-empty" class="mt-4 text-center text-sm text-[var(--text-secondary)]">Aún no hay información de cumplimiento para mostrar.</p>
    </article>
  </section>

  <section class="overflow-hidden rounded-xl border border-gray-200 bg-white shadow-md">
    <div class="bg-gradient-to-r from-slate-700 to-slate-800 px-6 py-4">
      <h3 class="text-lg font-semibold text-white">Actividades registradas</h3>
    </div>
    <div class="max-h-[600px] overflow-y-auto">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gradient-to-r from-gray-50 to-gray-100">
          <tr>
            <th scope="col" class="px-6 py-4 text-left text-xs font-bold uppercase tracking-wider text-gray-700">Actividad</th>
            <th scope="col" class="px-6 py-4 text-left text-xs font-bold uppercase tracking-wider text-gray-700">Descripción</th>
            <th scope="col" class="px-6 py-4 text-left text-xs font-bold uppercase tracking-wider text-gray-700">Estado</th>
            <th scope="col" class="px-6 py-4 text-left text-xs font-bold uppercase tracking-wider text-gray-700">Presupuesto</th>
            <th scope="col" class="px-6 py-4 text-left text-xs font-bold uppercase tracking-wider text-gray-700">Vigencia</th>
            <th scope="col" class="px-6 py-4 text-left text-xs font-bold uppercase tracking-wider text-gray-700">Responsable</th>
          </tr>
        </thead>
        <tbody id="dashboard-activities-body" class="divide-y divide-gray-200 bg-white"></tbody>
      </table>
    </div>
    <p id="dashboard-activities-empty" class="px-6 py-12 text-center text-sm text-[var(--text-secondary)]">No hay actividades para los filtros seleccionados.</p>
  </section>
</div>
    </main>
  </div>
</div>
</div>

<script type="module" src="../lib/loader.js"></script>
<script type="module" src="../pages_scripts/dashboard.js"></script>
<script type="module">
  import '../lib/session-guard.js';
  import { renderSidebar } from '../lib/sidebar-component.js';
  try {
    renderSidebar('#shared-sidebar');
  } catch (error) {
    console.warn('renderSidebar failed', error);
  }
</script>

</body>
</html>

